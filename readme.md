# 映画知識グラフ対話型ボットプロジェクト

## プロジェクト概要

このプロジェクトは、豆瓣映画TOP250のデータを活用した対話型ボットシステムです。データクローリングからフロントエンド表示までの全プロセスを網羅し、知識グラフの構築と活用方法を実践的に学習します。

## 主要機能

### 1. データスクレイピング

- `requests`ライブラリを使用
- BeautifulSoup4と正規表現を組み合わせて豆瓣映画TOP250のデータをスクレイピング・解析

### 2. Neo4jグラフデータベース

- Neo4j公式クラウドサービス上でのデータベース構築
- Cypherクエリ言語によるCRUD操作の実装

### 3. テンプレート解析

- 正規表現マッチングによるユーザー質問からの重要情報抽出
- 回答テンプレートを用いたNeo4jからの検索結果取得

### 4. フロントエンドインタラクション

- **UI**: TailwindCSS + Alpine.jsで対話ウィンドウを構築
- **バックエンド**: Flaskでサービスをカプセル化
- フロントエンドとバックエンドの機能統合

---

## 技術的補足

### プロジェクトの特徴

- ゼロから構築する完全な対話型ボットプロジェクト
- データ収集から表示まで、全工程を包括的にカバー

### アプローチについて

複雑な対話プロジェクトでは、意図認識やエンティティ抽出に深層学習モデルが使用されることが一般的です。しかし、本プロジェクトは初めての知識グラフプロジェクトとして、**知識グラフの構築と活用方法**に焦点を当てています。

---

## 実装ステップ

### ステップ1: データクローリング

#### 実装状況

現在、[data/douban_crawler.py](data/douban_crawler.py)に基本的なクローラークラスが実装されています。

#### 基本情報

- **入口URL**: <https://movie.douban.com/top250>
- **現在実装済み**:
  - 映画タイトル（中国語名）
  - 映画詳細ページURL
- **今後実装予定**:
  - 基本情報（監督、脚本家、主演俳優など）
  - 評価
  - 概要

#### 実装詳細

**Crawlerクラス** ([data/douban_crawler.py:9-24](data/douban_crawler.py#L9-L24))

1. **初期化 (`__init__`)**
   - User-Agentヘッダーを設定し、ブラウザアクセスを偽装
   - 豆瓣の基本的な反爬虫策に対応

2. **映画リスト取得 (`get_movie_list`)**
   - 指定URLからHTMLを取得
   - BeautifulSoupでCSSセレクタ `#content .grid_view .item .hd a` を使用してノードを抽出
   - 各映画の中国語タイトルとURLをリスト形式で返却

3. **メイン処理**
   - TOP250の10ページ（250件）をループ処理
   - 各ページのURLパラメータ `start` を25刻みで変更
   - 取得した映画リストを出力

#### 注意事項

- 監督、脚本家、主演俳優などの詳細ページは、構造と解析方法が基本的に一致しています
- 現在のスクリプトはリスト取得のみで、詳細情報の取得は未実装です

#### 今後の実装予定

1. 各映画の詳細ページから追加情報を取得
2. データをJSON形式で保存
3. エラーハンドリングと進捗表示の改善（tqdmライブラリを活用）
